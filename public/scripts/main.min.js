function Utils(){}function ParallaxFactory(e){this.parallaxPackage={},this.maxDeg=e}function Countdown(e,i){this.endtime=e,this.utils=new Utils,this.$target=i}Utils.prototype={convertToTwoDigits:function(e){return e<10?"0"+e:e},isCharacterKeyPress:function(e){return"undefined"==typeof e.which||"number"==typeof e.which&&e.which>0&&(!e.ctrlKey&&!e.metaKey&&!e.altKey&&8!=e.which)}},ParallaxFactory.prototype={getMatrix:function(e,i){var t=this,a=e.clientWidth/2,o=e.clientHeight/2,n=a-(i.pageX-e.offsetLeft),r=o-(i.pageY-e.offsetTop);return t.parallaxPackage.degX=r/o*t.maxDeg+"deg",t.parallaxPackage.degY=n/a*-t.maxDeg+"deg",t.parallaxPackage.X=(i.pageX*-1/2+a/2)/8,t.parallaxPackage.Y=(i.pageY*-1/2+o/2)/8,t.parallaxPackage}},Countdown.prototype={getTimeRemaining:function(e){var i=Date.parse(e)-Date.parse(new Date),t=Math.floor(i/1e3%60),a=Math.floor(i/1e3/60%60),o=Math.floor(i/36e5%24),n=Math.floor(i/864e5);return{total:i,days:this.utils.convertToTwoDigits(n),hours:this.utils.convertToTwoDigits(o),minutes:this.utils.convertToTwoDigits(a),seconds:this.utils.convertToTwoDigits(t)}},initCountdownClock:function(){var e=this;console.log("that.$target",e.$target.children());var i=setInterval(function(){var t=e.getTimeRemaining(e.endtime);e.$target.children(".days").html(t.days),e.$target.children(".hours").html(t.hours),e.$target.children(".mins").html(t.minutes),e.$target.children(".secs").html(t.seconds),t.total<=0&&clearInterval(i)},1e3)}},rko.carouselView=function(e){var i={swiper:void 0,swiperGallery:void 0,krizaTimeline:void 0,swiperLock:void 0};return i.bind=function(){var e=$("#plusone-checkbox-result"),t=$("#plusone-input");$(document).on("click","#plusone-checkbox",function(i){$(i.target).is(":checked")?(e.val("Yes"),t.removeClass("hidden")):(e.val("No"),t.addClass("hidden"))}),$("#rsvp-form").submit(function(e){var i=$(this).attr("action");$.ajax({type:"POST",url:i,data:$(this).serialize(),success:function(e){console.log("RSVP result:",e)}}),e.preventDefault()}),$(".gallery-movingUp-area").hover(function(){i.krizaTimeline.reverse(),i.krizaTimeline.timeScale(14)},function(){i.krizaTimeline.stop(),i.krizaTimeline.timeScale(1)}),$(".gallery-movingDown-area").hover(function(){i.krizaTimeline.play(),i.krizaTimeline.timeScale(14)},function(){i.krizaTimeline.stop(),i.krizaTimeline.timeScale(1)}),$(".gallery-movingUp-area").mousedown(function(){i.krizaTimeline.timeScale(60),console.log("hit")}),$(".gallery-movingUp-area").mouseup(function(){i.krizaTimeline.timeScale(14),console.log("hit")}),$(".gallery-movingDown-area").mousedown(function(){i.krizaTimeline.timeScale(60),console.log("hit")}),$(".gallery-movingDown-area").mouseup(function(){i.krizaTimeline.timeScale(14),console.log("hit")}),i.swiper=new Swiper(".swiper-container",{pagination:".swiper-pagination",direction:"vertical",slidesPerView:1,paginationClickable:!0,spaceBetween:0,mousewheelControl:!0,keyboardControl:!0,simulateTouch:!1,mousewheelForceToAxis:!0,mousewheelInvert:!0,mousewheelSensitivity:.5,onSlideChangeStart:function(e){1===e.activeIndex?$(".swiper-pagination").addClass("light-mode"):$(".swiper-pagination").hasClass("light-mode")&&$(".swiper-pagination").removeClass("light-mode"),3===e.activeIndex?"undefined"==typeof i.krizaTimeline?(i.krizaTimeline=new TimelineLite,i.krizaTimeline.to($(".gallery-scroller"),300,{y:"-100%"}),i.krizaTimeline.stop()):(i.krizaTimeline.restart(),i.krizaTimeline.stop()):($(".kriza-gallery-container .gallery-scroller").removeAttr("style"),"undefined"!=typeof i.krizaTimeline&&(i.krizaTimeline.stop(),i.krizaTimeline.restart())),e.disableMousewheelControl()},onSlideChangeEnd:function(e){2===e.activeIndex?("undefined"==typeof i.swiperGallery&&(i.swiperGallery=new Swiper(".swiper-container-gallery",{pagination:".swiper-pagination-gallery",direction:"horizontal",slidesPerView:1,effect:"fade",paginationClickable:!0,spaceBetween:0,simulateTouch:!1,keyboardControl:!0,mousewheelControl:!0,mousewheelForceToAxis:!0,mousewheelInvert:!0})),$(".swiper-pagination").addClass("transparent-mode")):$(".swiper-pagination").hasClass("transparent-mode")&&$(".swiper-pagination").removeClass("transparent-mode"),i.swiperLock=setTimeout(function(){e.enableMousewheelControl()},400)}}),$(".gallery-movingDown-area").on("click",function(){}),$("#landing").mousemove(function(e){var i=this.clientWidth/2,t=this.clientHeight/2,a=(i-(event.pageX-this.offsetLeft),t-(event.pageY-this.offsetTop),(e.pageX*-1/2+i/2)/8),o=(e.pageY*-1/2+t/2)/8;$("#parallax-landing").css("transform","translate3d("+a/2+"px, "+o/2+"px, -200px)"),$("#landing .km-logo").css("transform","perspective(200px) translate3d("+-a/12+"px, "+-o/12+"px, 0)")});var a=new Countdown("2017-06-23",$("#invitation .countdown"));a.initCountdownClock()},i}(window),rko.passwordView=function(e){var i={},t=new Utils,a=rko.carouselView;return i.bind=function(){$("#secretword-input").keydown(function(e){$("#login-error-msg").removeClass("show")}),$(document).keydown(function(e){$("body").hasClass("introMode")&&t.isCharacterKeyPress(e)&&27!==e.keyCode&&($("body").removeClass().addClass("passwordMode"),$("#secretword-input").focus(),console.log("Into password mode, leaving introMode")),$("body").hasClass("passwordMode")&&27===e.keyCode&&($("body").removeClass().addClass("introMode"),$("#secretword-input").val(""),console.log("Into introMode, leaving passwordMode"))}),$("#login-form").submit(function(e){var i=$(this).attr("action");$.ajax({type:"POST",url:i,data:$(this).serialize(),success:function(e){var e=$.parseJSON(e);"success"===e.result?($("#main").html(e.html),a.bind(),$("body").removeClass().addClass("invitationMode"),$(document).unbind("keydown")):$("#login-error-msg").addClass("show")}}),e.preventDefault()})},i.init=function(){i.bind()},i}(window),rko.app=function(e){var i={},t=rko.passwordView;return i.init=function(){t.init();var e,i=new ParallaxFactory(5);$("#auth").mousemove(function(t){e=i.getMatrix(this,t),$("#parallax-auth").css("transform","perspective(1000px) translate3d("+e.X/2+"px, "+e.Y/2+"px, -20px)"),$(".lock-icon").css("transform","perspective(40px) translate3d("+-e.X/4+"px, "+-e.Y/4+"px, 0) rotateX("+e.degX+") rotateY("+e.degY+")"),$(".logo").css("transform","perspective(500px) translate3d("+-e.X/8+"px, "+-e.Y/8+"px, 0) rotateX("+e.degX+") rotateY("+e.degY+")")})},i}(window);