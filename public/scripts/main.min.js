function Utils(){this.keysmap={escape:27}}function ParallaxFactory(e){this.parallaxPackage={},this.maxDeg=e}function Countdown(e,i){this.endtime=e,this.utils=new Utils,this.$target=i}Utils.prototype={convertToTwoDigits:function(e){return e<10?"0"+e:e},isCharacterKeyPress:function(e){return"undefined"==typeof e.which||"number"==typeof e.which&&e.which>0&&(!e.ctrlKey&&!e.metaKey&&!e.altKey&&8!=e.which)}},ParallaxFactory.prototype={getMatrix:function(e,i){var a=this,o=e.clientWidth/2,t=e.clientHeight/2,n=o-(i.pageX-e.offsetLeft),r=t-(i.pageY-e.offsetTop);return a.parallaxPackage.degX=r/t*a.maxDeg+"deg",a.parallaxPackage.degY=n/o*-a.maxDeg+"deg",a.parallaxPackage.X=(i.pageX*-1/2+o/2)/8,a.parallaxPackage.Y=(i.pageY*-1/2+t/2)/8,a.parallaxPackage}},Countdown.prototype={getTimeRemaining:function(e){var i=Date.parse(e)-Date.parse(new Date),a=Math.floor(i/1e3%60),o=Math.floor(i/1e3/60%60),t=Math.floor(i/36e5%24),n=Math.floor(i/864e5);return{total:i,days:this.utils.convertToTwoDigits(n),hours:this.utils.convertToTwoDigits(t),minutes:this.utils.convertToTwoDigits(o),seconds:this.utils.convertToTwoDigits(a)}},initCountdownClock:function(){var e=this;console.log("that.$target",e.$target.children());var i=setInterval(function(){var a=e.getTimeRemaining(e.endtime);e.$target.children(".days").html(a.days),e.$target.children(".hours").html(a.hours),e.$target.children(".mins").html(a.minutes),e.$target.children(".secs").html(a.seconds),a.total<=0&&clearInterval(i)},1e3)}},rko.carouselView=function(e){var i={swiper:void 0,swiperGallery:void 0,krizaTimeline:void 0,swiperLock:void 0};return i.bind=function(){var e=$("#plusone-checkbox-result"),a=$("#plusone-input");$(document).on("click","#plusone-checkbox",function(i){$(i.target).is(":checked")?(e.val("Yes"),a.removeClass("hidden")):(e.val("No"),a.addClass("hidden"))}),$("#rsvp-form").submit(function(e){var i=$(this).attr("action");$.ajax({type:"POST",url:i,data:$(this).serialize(),success:function(e){console.log("RSVP result:",e)}}),e.preventDefault()}),$(".gallery-movingUp-area").hover(function(){i.krizaTimeline.reverse(),i.krizaTimeline.timeScale(14)},function(){i.krizaTimeline.stop(),i.krizaTimeline.timeScale(1)}),$(".gallery-movingDown-area").hover(function(){i.krizaTimeline.play(),i.krizaTimeline.timeScale(14)},function(){i.krizaTimeline.stop(),i.krizaTimeline.timeScale(1)}),$(".gallery-movingUp-area").mousedown(function(){i.krizaTimeline.timeScale(60),console.log("hit")}),$(".gallery-movingUp-area").mouseup(function(){i.krizaTimeline.timeScale(14),console.log("hit")}),$(".gallery-movingDown-area").mousedown(function(){i.krizaTimeline.timeScale(60),console.log("hit")}),$(".gallery-movingDown-area").mouseup(function(){i.krizaTimeline.timeScale(14),console.log("hit")}),i.swiper=new Swiper(".swiper-container",{pagination:".swiper-pagination",direction:"vertical",slidesPerView:1,paginationClickable:!0,spaceBetween:0,mousewheelControl:!0,keyboardControl:!0,simulateTouch:!1,mousewheelForceToAxis:!0,mousewheelInvert:!0,mousewheelSensitivity:.5,onSlideChangeStart:function(e){1===e.activeIndex?$(".swiper-pagination").addClass("light-mode"):$(".swiper-pagination").hasClass("light-mode")&&$(".swiper-pagination").removeClass("light-mode"),3===e.activeIndex?"undefined"==typeof i.krizaTimeline?(i.krizaTimeline=new TimelineLite,i.krizaTimeline.to($(".gallery-scroller"),300,{y:"-100%"}),i.krizaTimeline.stop()):(i.krizaTimeline.restart(),i.krizaTimeline.stop()):($(".kriza-gallery-container .gallery-scroller").removeAttr("style"),"undefined"!=typeof i.krizaTimeline&&(i.krizaTimeline.stop(),i.krizaTimeline.restart())),e.disableMousewheelControl()},onSlideChangeEnd:function(e){2===e.activeIndex?("undefined"==typeof i.swiperGallery&&(i.swiperGallery=new Swiper(".swiper-container-gallery",{pagination:".swiper-pagination-gallery",direction:"horizontal",slidesPerView:1,effect:"fade",paginationClickable:!0,spaceBetween:0,simulateTouch:!1,keyboardControl:!0,mousewheelControl:!0,mousewheelForceToAxis:!0,mousewheelInvert:!0})),$(".swiper-pagination").addClass("transparent-mode")):$(".swiper-pagination").hasClass("transparent-mode")&&$(".swiper-pagination").removeClass("transparent-mode"),i.swiperLock=setTimeout(function(){e.enableMousewheelControl()},400)}}),$(".gallery-movingDown-area").on("click",function(){}),$("#landing").mousemove(function(e){var i=this.clientWidth/2,a=this.clientHeight/2,o=(i-(event.pageX-this.offsetLeft),a-(event.pageY-this.offsetTop),(e.pageX*-1/2+i/2)/8),t=(e.pageY*-1/2+a/2)/8;$("#parallax-landing").css("transform","translate3d("+o/2+"px, "+t/2+"px, -200px)"),$("#landing .km-logo").css("transform","perspective(200px) translate3d("+-o/12+"px, "+-t/12+"px, 0)")});var o=new Countdown("2017-06-23",$("#invitation .countdown"));o.initCountdownClock()},i.init=function(e){$("#main").html(e),this.bind(),$("body").removeClass().addClass("carouselMode")},i}(window),rko.passwordView=function(e){var i={previousModeLabel:void 0,modeLabel:"passwordMode",bindables:{$passwordInput:$("#password-input"),$passwordForm:$("#password-form"),$doc:$(document)},$body:$("body"),$passwordErrorMsg:$("#login-error-msg")},a=new Utils,o=rko.carouselView;return i.bind=function(){var e,i=this;i.bindables.$passwordInput.keydown(function(e){i.hidePasswordErrorMessage()}),i.bindables.$doc.keydown(function(o){e=o.keyCode,i.$body.hasClass(i.previousModeLabel)&&a.isCharacterKeyPress(o)&&e!==a.keysmap.escape&&(i.$body.removeClass().addClass(i.modeLabel),i.bindables.$passwordInput.focus()),i.$body.hasClass(i.modeLabel)&&e===a.keysmap.escape&&(i.$body.removeClass().addClass(i.previousModeLabel),i.bindables.$passwordInput.val(""))}),i.bindables.$passwordForm.submit(function(e){var a=$(this).attr("action");$.ajax({type:"POST",url:a,data:$(this).serialize(),success:function(e){e=$.parseJSON(e),"success"===e.result?(i.unbind(),o.init(e.html)):i.showPasswordErrorMessage()}}),e.preventDefault()})},i.unbind=function(){var e=this.bindables;for(var i in e)e.hasOwnProperty(i)&&e[i].off()},i.showPasswordErrorMessage=function(){this.$passwordErrorMsg.addClass("show")},i.hidePasswordErrorMessage=function(){this.$passwordErrorMsg.removeClass("show")},i.init=function(e){this.previousModeLabel=e,this.bind()},i}(window),rko.app=function(e){var i={previousMode:void 0,modeLabel:"introMode",$lockIcon:$(".lock-icon"),$logo:$(".logo"),$background:$("#parallax-auth")},a=rko.passwordView;return i.init=function(){var e,i=new ParallaxFactory(5),o=this;a.init(this.modeLabel),$("#auth").mousemove(function(a){e=i.getMatrix(this,a),o.$lockIcon.css("transform","perspective(40px) translate3d("+-e.X/4+"px, "+-e.Y/4+"px, 0) rotateX("+e.degX+") rotateY("+e.degY+")"),o.$logo.css("transform","perspective(500px) translate3d("+-e.X/8+"px, "+-e.Y/8+"px, 0) rotateX("+e.degX+") rotateY("+e.degY+")"),o.$background.css("transform","perspective(1000px) translate3d("+e.X/2+"px, "+e.Y/2+"px, -20px)")})},i}(window);